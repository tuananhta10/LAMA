<div class="mt-3  px-lg-5">
	<div class=""
	style="width: 100% !important; min-height: 400px;" 
	[@animate]="{value:'*', params:{ x:'-50px', delay:'200ms' }}">
		<div>
			<!-- <img src="/assets/images/icons/employees-purple.svg" width="25px" class="me-2 img-fluid img-title"> -->
			<span class="ms-2 main-title">Bulk SMS Notifications</span>
			<div class="float-end">
				<!-- <button class="btn btn-menu me-3 ">
					<img src="/assets/images/icons/menu-icon.png" width="15px" class="img-fluid">
				</button> -->
				
				<!-- <button class="btn btn-primary-outline ms-3">Templates</button> -->
			</div>
		</div>	

		<p class="ms-2">Send SMS to multiple employees by selecting their respective groups.</p>


		<div class="pt-4 me-3 mt-4 card card-body">
			<div class="row">
				<div class="col-12 col-md-5">

					<form [formGroup]="smsForm" >
						<div class="card card-body pt-4 px-lg-4">
							<h5 class="ms-3 mb-0">Primary Details</h5>
							<hr>

							<!-- <app-textarea
							[labelTop]="true"
							formControlName="sms_from"
							[rows]="1" 
							label="From"></app-textarea> -->
							<app-search-list
							[labelTop]="true"
							[options]="templatesList"
							[objectReturn]="true"
							formControlName="sms_template" 
							label="SMS Template"
							[isTextArea]="true"
							[rows]="1"
							[newOption]="true"
							[newOptionLabel]="'SMS Template'"
							[newOptionRoute]="'/admin/setup/interests'"></app-search-list>

							<app-search-list
							[labelTop]="true"
							[options]="groupList"
							formControlName="sms_group" 
							label="SMS Group"
							[newOption]="true"
							[newOptionLabel]="'SMS Group'"
							[newOptionRoute]="'/admin/setup/bulk-communication-groups'"></app-search-list>
							

							<app-textarea
							[labelTop]="true"
							formControlName="sms_subject"
							[rows]="2" 
							label="Subject"></app-textarea>

							

							<app-textarea
							[labelTop]="true"
							formControlName="sms_content"
							[rows]="8" 
							label="SMS Text"></app-textarea>


						</div>
					</form>
				</div>

				<div class="col-12 col-md-7">
					<div class="px-lg-2 pb-5">
						<!-- <h5>SMS Text</h5> -->
						
						<div class="card card-body pt-3">

							<div class="ms-3">
								<div>
									<h5 class="mt-2">Contact List
										<div class="search-div me-1 float-end">
											<div class="input-group">
											  <img src="/assets/images/icons/search.png">

											  <input type="text" class="form-control" placeholder="Search" aria-label="Search"
											  [(ngModel)]="searchBy" (ngModelChange)="searchDataSource()">
											</div>
										</div>
									</h5>
								</div>
								<br>
								
								<div class="mt-3" *ngIf="loading">
									<global-admin-loader 
										[formOnly]="true"
										[fromDetailTab]="true"
										[withSideBar]="false"
										[loading]="loading">
									</global-admin-loader>
								</div>

								<div class="mt-3" style="height: 400px !important; overflow-y: auto;">
									<table class="table w-100" *ngIf="!loading">
										<thead>
											<tr>
												<th>
													<mat-checkbox color="primary"
													    [value]="'All'"
													    [(ngModel)]="checkAll"
													    (ngModelChange)="checkAllEmployee()">
													    <span>Employee</span>
													</mat-checkbox>

												</th>
												<th>Phone Number</th>
											</tr>
										</thead>

										<tbody>
											<tr  *ngFor="let cb of filteredCheckboxOptions; let i = index">
												<td>
													<mat-checkbox color="primary"
													    [value]="cb.phone_number"
													    [(ngModel)]="cb.checked"
													    (change)="onChangeCheckbox($event, i)">
													    <span class="text-capitalize">
													    	{{ cb?.full_name }}
													    </span>
													</mat-checkbox>
												</td>

												<td>{{ cb?.phone_number }}</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
							
						</div>

						<div class="text-end mt-3">
							<button class="btn btn-header me-2" (click)="saveTemplate()">Save Template</button>

							<button class="btn btn-primary me-3" (click)="sendSMS()">Send SMS
								<img src="/assets/images/icons/send.png" 
								style="height: 15px; margin-left: 5px; margin-top: -3px;">
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
