<div class="card-form">
	<div mat-dialog-title>
		<h5 class="mat-dialog-title"><span *ngIf="!data; else showUpdate">Add</span>
            <ng-template #showUpdate>Update</ng-template> Pricelist
            <img src="/assets/images/icons/close-dialog.png" 
            class="float-end mt-2" 
            style="width: 13px; cursor: pointer;" 
            (click)="dialogRef.close()"> 
        </h5>
		<hr>
	</div>
	<form [formGroup]="priceListForm">
		<div mat-dialog-content>
			<div>
				<app-price-list-details *ngIf="formStep === 1" 
				[data]="data"
				[priceListForm]="priceListForm"></app-price-list-details>
			</div>

			<!--<div class="row" style="margin-top: -30px;">
				<div class="col-12 col-md-3" style="height: 260px">
                     <lama-stepper [stepperList]="pricelistSteps$" 
                    [selectedIndex]="formStep - 1" #pricelistStepper></lama-stepper> 
				</div>
				<div class="col-12 col-md-9" style="height: 260px">
                    <app-price-list-details *ngIf="formStep === 1" 
                    [priceListForm]="priceListForm"></app-price-list-details>
				</div>
			</div>-->

			<div class="row">
                <div class="col-md-12 px-md-5 pt-0 mt-3">
                	<ng-container *ngIf="data?.details; else showPriceSaveFirst">
                		<app-form-table
                		    [columns]="priceDetailsColumns"
                		    [data]="priceDetailsdata"
                		    (addEvent)="openPriceDetailsModal($event, data)"
                		    [isAddEnabled]="true"
                		    [isDeleteEnabled]="true"
                		    label="Pricelist Periods List"
                		></app-form-table>

                		<app-form-table
                		    [columns]="priceRateColumns"
                		    [data]="priceRatedata"
                		    (addEvent)="openPriceRateModal($event, data)"
                		    [isAddEnabled]="true"
                		    [isDeleteEnabled]="true"
                		    label="Pricelist Rates"
                		></app-form-table>
                	</ng-container>

                    <ng-template #showPriceSaveFirst>
                    	<p class="ms-3 text-muted">Please save record first</p>
                    </ng-template>
                </div>
			</div>
		</div>
		<div mat-dialog-actions>
			<div class="text-center mb-3 px-0 w-100">
				<hr><br>

				<button mat-button *ngIf="formStep === 1" (click)="close()" 
				class="btn  btn-header-gray me-3">Close</button>

               <!--  <button mat-button *ngIf="formStep === 1" (click)="next()"
                [disabled]="!priceListForm.valid"
				cdkFocusInitial class="btn btn-primary btn-header me-3">Next</button> -->

                <button mat-button *ngIf="formStep === 2" (click)="back()" 
				class="btn  btn-header-gray me-3">Back</button>

				<button mat-button *ngIf="formStep === 1" (click)="save()"
                [disabled]="!priceListForm.valid"
				 class="btn btn-primary btn-header me-3">
				 	<span *ngIf="!data; else showSave">Add</span>
				 	<ng-template #showSave>Save</ng-template> 
				</button>
			</div>
		</div>
	</form>

</div>